---
interface Props {
	src: string;
	alt: string;
	width?: string;
	class?: string;
	framed?: boolean;
	showalt?: boolean;
	sourceUrl?: string;
	sourceTitle?: string;
	margin?: string;
}

const {
	src,
	alt,
	width = "800px",
	class: className,
	framed = false,
	showalt = false,
	sourceUrl,
	sourceTitle,
	margin,
} = Astro.props;
---

<figure
	class:list={["container", className, { framed }]}
	style={`margin: ${margin || ""}`}
>
	<div
		class:list={["image-wrapper", { "image-frame": framed }]}
		style={`width: ${width}`}
	>
		<img src={src} alt={alt} loading="lazy" />
	</div>
	{
		showalt &&
			(sourceUrl ? (
				<figcaption>
					{alt} â€“ Source: <a href={sourceUrl}>{sourceTitle}</a>
				</figcaption>
			) : (
				<figcaption>{alt}</figcaption>
			))
	}
</figure>

<style>
	.container {
		max-width: 100%;
		grid-column: 1 / 4 !important;
		text-align: center;
		margin: 1rem auto 2rem;
	}

	.image-wrapper {
		max-width: 100%;
		display: flex;
		justify-content: center;
	}

	.image-frame {
		border: 1px solid var(--color-tinted-cream);
		border-radius: var(--border-radius-base);
		box-shadow: var(--box-shadow-lg);
		margin-bottom: var(--space-xs);
	}

	img {
		width: 100%;
		height: auto;
		display: block;
		border-radius: var(--border-radius-sm);
	}

	figcaption {
		font-family: var(--font-sans);
		font-size: var(--font-size-sm);
		color: var(--color-gray-600);
		line-height: 1.5;
		width: 100%;
		max-width: 800px;
		margin: var(--space-s) auto;
	}
</style>
